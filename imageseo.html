<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Image Renamer - Bulk Rename with SEO & Geotags</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .upload-zone {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            background: linear-gradient(45deg, #f8f9ff 0%, #e6eaff 100%);
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 30px;
        }

        .upload-zone:hover {
            border-color: #5a67d8;
            background: linear-gradient(45deg, #e6eaff 0%, #d6dcff 100%);
        }

        .upload-zone.dragover {
            border-color: #4c51bf;
            background: linear-gradient(45deg, #d6dcff 0%, #c6ccff 100%);
        }

        .upload-icon {
            font-size: 4em;
            color: #667eea;
            margin-bottom: 20px;
        }

        .upload-text {
            font-size: 1.3em;
            color: #4a5568;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .upload-subtitle {
            color: #718096;
            font-size: 1em;
        }

        .settings-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .setting-group {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .setting-group h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #4a5568;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
        }

        .image-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .image-card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .image-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .image-thumbnail {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .image-info {
            font-size: 0.9em;
        }

        .original-name {
            color: #718096;
            margin-bottom: 5px;
            word-break: break-all;
        }

        .new-name {
            color: #2d3748;
            font-weight: 600;
            margin-bottom: 10px;
            word-break: break-all;
        }

        .location-info {
            background: #e6fffa;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.8em;
            color: #234e52;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .status-text {
            text-align: center;
            color: #4a5568;
            margin: 10px 0;
        }

        .results-panel {
            background: #f0fff4;
            border: 2px solid #9ae6b4;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            text-align: center;
        }

        .results-panel h3 {
            color: #22543d;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .file-input {
            display: none;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            async analyzeImageContent(file) {
                return new Promise((resolve) => {
                    const img = new Image();
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    img.onload = () => {
                        // Resize image for analysis
                        const maxSize = 512;
                        let { width, height } = img;
                        
                        if (width > height) {
                            if (width > maxSize) {
                                height = (height * maxSize) / width;
                                width = maxSize;
                            }
                        } else {
                            if (height > maxSize) {
                                width = (width * maxSize) / height;
                                height = maxSize;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // Get image data for analysis
                        const imageData = ctx.getImageData(0, 0, width, height);
                        const description = this.performImageAnalysis(imageData, width, height);
                        resolve(description);
                    };
                    
                    img.src = URL.createObjectURL(file);
                });
            }

            performImageAnalysis(imageData, width, height) {
                const data = imageData.data;
                const totalPixels = width * height;
                
                // Analyze color composition
                let totalR = 0, totalG = 0, totalB = 0;
                let brightnessSum = 0;
                let colorVariance = 0;
                
                for (let i = 0; i < data.length; i += 4) {
                    const r = data[i];
                    const g = data[i + 1];
                    const b = data[i + 2];
                    
                    totalR += r;
                    totalG += g;
                    totalB += b;
                    
                    const brightness = (r + g + b) / 3;
                    brightnessSum += brightness;
                }
                
                const avgR = totalR / totalPixels;
                const avgG = totalG / totalPixels;
                const avgB = totalB / totalPixels;
                const avgBrightness = brightnessSum / totalPixels;
                
                // Detect dominant colors and patterns
                const isWarm = avgR > avgG && avgR > avgB;
                const isCool = avgB > avgR && avgB > avgG;
                const isGreen = avgG > avgR && avgG > avgB;
                const isDark = avgBrightness < 85;
                const isBright = avgBrightness > 170;
                
                // Edge detection for complexity
                const edges = this.detectEdges(data, width, height);
                const complexity = edges / totalPixels;
                
                // Generate descriptive filename based on analysis
                let description = '';
                
                // Color descriptions
                if (isWarm && isBright) {
                    description += 'sunny-warm';
                } else if (isWarm && isDark) {
                    description += 'cozy-amber';
                } else if (isCool && isBright) {
                    description += 'bright-cool';
                } else if (isCool && isDark) {
                    description += 'moody-blue';
                } else if (isGreen && isBright) {
                    description += 'fresh-green';
                } else if (isGreen && isDark) {
                    description += 'deep-forest';
                } else if (isDark) {
                    description += 'dark-dramatic';
                } else if (isBright) {
                    description += 'bright-clean';
                } else {
                    description += 'balanced-neutral';
                }
                
                // Complexity and subject matter inference
                if (complexity > 0.3) {
                    description += '-detailed-scene';
                } else if (complexity > 0.15) {
                    description += '-textured-subject';
                } else {
                    description += '-simple-composition';
                }
                
                // Aspect ratio hints
                const aspectRatio = width / height;
                if (aspectRatio > 1.5) {
                    description += '-landscape';
                } else if (aspectRatio < 0.75) {
                    description += '-portrait';
                } else {
                    description += '-square';
                }
                
                // Add some variety with additional descriptors
                const additionalDescriptors = [
                    'photograph', 'image', 'picture', 'shot', 'capture',
                    'artistic', 'professional', 'candid', 'styled', 'natural'
                ];
                
                const randomDescriptor = additionalDescriptors[Math.floor(Math.random() * additionalDescriptors.length)];
                description += `-${randomDescriptor}`;
                
                return description;
            }

            detectEdges(data, width, height) {
                let edgeCount = 0;
                const threshold = 50;
                
                for (let y = 1; y < height - 1; y++) {
                    for (let x = 1; x < width - 1; x++) {
                        const idx = (y * width + x) * 4;
                        
                        const centerBrightness = (data[idx] + data[idx + 1] + data[idx + 2]) / 3;
                        
                        // Check surrounding pixels
                        const leftIdx = (y * width + (x - 1)) * 4;
                        const rightIdx = (y * width + (x + 1)) * 4;
                        const topIdx = ((y - 1) * width + x) * 4;
                        const bottomIdx = ((y + 1) * width + x) * 4;
                        
                        const leftBrightness = (data[leftIdx] + data[leftIdx + 1] + data[leftIdx + 2]) / 3;
                        const rightBrightness = (data[rightIdx] + data[rightIdx + 1] + data[rightIdx + 2]) / 3;
                        const topBrightness = (data[topIdx] + data[topIdx + 1] + data[topIdx + 2]) / 3;
                        const bottomBrightness = (data[bottomIdx] + data[bottomIdx + 1] + data[bottomIdx + 2]) / 3;
                        
                        const gradientX = Math.abs(rightBrightness - leftBrightness);
                        const gradientY = Math.abs(bottomBrightness - topBrightness);
                        const gradient = Math.sqrt(gradientX * gradientX + gradientY * gradientY);
                        
                        if (gradient > threshold) {
                            edgeCount++;
                        }
                    }
                }
                
                return edgeCount;
            
            .main-card {
                padding: 20px;
            }
            
            .settings-panel {
                grid-template-columns: 1fr;
            }
            
            .image-preview {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🤖 AI Image Renamer</h1>
            <p>Bulk rename your images with AI-powered descriptions, SEO optimization & geotagging</p>
        </div>

        <div class="main-card">
            <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
                <div class="upload-icon">📸</div>
                <div class="upload-text">Drop images here or click to browse</div>
                <div class="upload-subtitle">Supports JPG, PNG, WebP • Up to 50 images • Max 10MB each</div>
            </div>
            
            <input type="file" id="fileInput" class="file-input" multiple accept="image/*">

            <div class="settings-panel">
                <div class="setting-group">
                    <h3>🎯 SEO Settings</h3>
                    <div class="form-group">
                        <label for="keywords">Target Keywords (comma-separated)</label>
                        <input type="text" id="keywords" placeholder="e.g., nature, landscape, photography">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeKeywords" checked>
                        <label for="includeKeywords">Include keywords in filenames</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="seoOptimize" checked>
                        <label for="seoOptimize">SEO-friendly formatting (lowercase, hyphens)</label>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>📍 Geotag Settings</h3>
                    <div class="form-group">
                        <label for="location">Default Location</label>
                        <input type="text" id="location" placeholder="e.g., New York, USA">
                    </div>
                    <div class="form-group">
                        <label for="latitude">Latitude</label>
                        <input type="number" id="latitude" step="0.000001" placeholder="40.7128">
                    </div>
                    <div class="form-group">
                        <label for="longitude">Longitude</label>
                        <input type="number" id="longitude" step="0.000001" placeholder="-74.0060">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="addGeotags">
                        <label for="addGeotags">Add geotags to all images</label>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>⚙️ Processing Options</h3>
                    <div class="form-group">
                        <label for="namingStyle">Naming Style</label>
                        <select id="namingStyle">
                            <option value="descriptive">Descriptive (AI-analyzed content)</option>
                            <option value="keyword-numbered">Keywords + Numbers</option>
                            <option value="hybrid">Hybrid (Keywords + Description)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="maxLength">Max filename length</label>
                        <input type="number" id="maxLength" value="50" min="20" max="100">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="preserveExtension" checked>
                        <label for="preserveExtension">Preserve original file extension</label>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-bottom: 20px;">
                <button class="btn" id="processBtn" disabled>
                    🚀 Process Images
                </button>
                <button class="btn btn-secondary" id="downloadBtn" style="display: none;">
                    💾 Download Renamed Images
                </button>
                <button class="btn btn-danger" id="clearBtn">
                    🗑️ Clear All
                </button>
            </div>

            <div class="progress-bar" style="display: none;">
                <div class="progress-fill" style="width: 0%"></div>
            </div>
            <div class="status-text" style="display: none;"></div>

            <div class="image-preview" id="imagePreview"></div>

            <div class="results-panel" style="display: none;" id="resultsPanel">
                <h3>✅ Processing Complete!</h3>
                <p>All images have been renamed and are ready for download.</p>
            </div>
        </div>
    </div>

    <script>
        class ImageRenamer {
            constructor() {
                this.files = [];
                this.processedFiles = [];
                this.initializeEventListeners();
            }

            initializeEventListeners() {
                const fileInput = document.getElementById('fileInput');
                const uploadZone = document.querySelector('.upload-zone');
                const processBtn = document.getElementById('processBtn');
                const downloadBtn = document.getElementById('downloadBtn');
                const clearBtn = document.getElementById('clearBtn');

                fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
                
                uploadZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadZone.classList.add('dragover');
                });

                uploadZone.addEventListener('dragleave', () => {
                    uploadZone.classList.remove('dragover');
                });

                uploadZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadZone.classList.remove('dragover');
                    this.handleFileSelect(e);
                });

                processBtn.addEventListener('click', () => this.processImages());
                downloadBtn.addEventListener('click', () => this.downloadImages());
                clearBtn.addEventListener('click', () => this.clearAll());
            }

            handleFileSelect(e) {
                const files = e.dataTransfer ? e.dataTransfer.files : e.target.files;
                this.addFiles([...files]);
            }

            addFiles(newFiles) {
                const imageFiles = newFiles.filter(file => file.type.startsWith('image/'));
                
                if (imageFiles.length === 0) {
                    alert('Please select valid image files (JPG, PNG, WebP)');
                    return;
                }

                if (this.files.length + imageFiles.length > 50) {
                    alert('Maximum 50 images allowed');
                    return;
                }

                imageFiles.forEach(file => {
                    if (file.size > 10 * 1024 * 1024) {
                        alert(`File ${file.name} is too large (max 10MB)`);
                        return;
                    }
                    this.files.push(file);
                });

                this.displayImages();
                document.getElementById('processBtn').disabled = this.files.length === 0;
            }

            async displayImages() {
                const preview = document.getElementById('imagePreview');
                preview.innerHTML = '';

                for (let i = 0; i < this.files.length; i++) {
                    const file = this.files[i];
                    const imageCard = document.createElement('div');
                    imageCard.className = 'image-card';

                    const img = document.createElement('img');
                    img.className = 'image-thumbnail';
                    img.src = URL.createObjectURL(file);

                    const originalName = document.createElement('div');
                    originalName.className = 'original-name';
                    originalName.textContent = `Original: ${file.name}`;

                    const newName = document.createElement('div');
                    newName.className = 'new-name';
                    newName.textContent = 'New name will appear here';

                    const locationInfo = document.createElement('div');
                    locationInfo.className = 'location-info';
                    locationInfo.style.display = 'none';

                    imageCard.appendChild(img);
                    imageCard.appendChild(originalName);
                    imageCard.appendChild(newName);
                    imageCard.appendChild(locationInfo);
                    preview.appendChild(imageCard);
                }
            }

            async processImages() {
                const processBtn = document.getElementById('processBtn');
                const progressBar = document.querySelector('.progress-bar');
                const progressFill = document.querySelector('.progress-fill');
                const statusText = document.querySelector('.status-text');

                processBtn.disabled = true;
                progressBar.style.display = 'block';
                statusText.style.display = 'block';

                this.processedFiles = [];
                const imageCards = document.querySelectorAll('.image-card');

                for (let i = 0; i < this.files.length; i++) {
                    const file = this.files[i];
                    const card = imageCards[i];
                    
                    statusText.textContent = `Processing image ${i + 1} of ${this.files.length}: ${file.name}`;
                    progressFill.style.width = `${((i + 1) / this.files.length) * 100}%`;

                    try {
                        const newName = await this.generateFileName(file);
                        const newNameDiv = card.querySelector('.new-name');
                        newNameDiv.textContent = `New: ${newName}`;
                        newNameDiv.style.color = '#38a169';

                        // Add location info if geotagging is enabled
                        if (document.getElementById('addGeotags').checked) {
                            const locationInfo = card.querySelector('.location-info');
                            const location = document.getElementById('location').value || 'Unknown Location';
                            const lat = document.getElementById('latitude').value;
                            const lon = document.getElementById('longitude').value;
                            
                            locationInfo.textContent = `📍 ${location}${lat && lon ? ` (${lat}, ${lon})` : ''}`;
                            locationInfo.style.display = 'block';
                        }

                        this.processedFiles.push({
                            original: file,
                            newName: newName,
                            location: this.getLocationData()
                        });

                        await this.delay(100); // Simulate processing time
                    } catch (error) {
                        console.error('Error processing file:', error);
                        const newNameDiv = card.querySelector('.new-name');
                        newNameDiv.textContent = 'Error processing file';
                        newNameDiv.style.color = '#e53e3e';
                    }
                }

                statusText.textContent = 'Processing complete!';
                document.getElementById('resultsPanel').style.display = 'block';
                document.getElementById('downloadBtn').style.display = 'inline-flex';
                processBtn.disabled = false;
            }

            async generateFileName(file) {
                const keywords = document.getElementById('keywords').value.split(',').map(k => k.trim()).filter(k => k);
                const namingStyle = document.getElementById('namingStyle').value;
                const maxLength = parseInt(document.getElementById('maxLength').value);
                const seoOptimize = document.getElementById('seoOptimize').checked;
                const includeKeywords = document.getElementById('includeKeywords').checked;

                let newName = '';

                // Analyze the actual image content
                const imageDescription = await this.analyzeImageContent(file);

                switch (namingStyle) {
                    case 'descriptive':
                        newName = imageDescription;
                        break;
                    case 'keyword-numbered':
                        if (keywords.length > 0 && includeKeywords) {
                            const keyword = keywords[Math.floor(Math.random() * keywords.length)];
                            newName = `${keyword}-${imageDescription}`;
                        } else {
                            newName = `${imageDescription}-${Date.now() % 10000}`;
                        }
                        break;
                    case 'hybrid':
                        if (keywords.length > 0 && includeKeywords) {
                            const keyword = keywords[Math.floor(Math.random() * keywords.length)];
                            newName = `${keyword}-${imageDescription}`;
                        } else {
                            newName = imageDescription;
                        }
                        break;
                }

                if (seoOptimize) {
                    newName = newName.toLowerCase()
                        .replace(/[^a-z0-9\s-]/g, '')
                        .replace(/\s+/g, '-')
                        .replace(/-+/g, '-')
                        .trim();
                }

                if (newName.length > maxLength) {
                    newName = newName.substring(0, maxLength);
                }

                const extension = document.getElementById('preserveExtension').checked ? 
                    file.name.split('.').pop() : 'jpg';

                return `${newName}.${extension}`;
            }

            getLocationData() {
                if (!document.getElementById('addGeotags').checked) {
                    return null;
                }

                return {
                    location: document.getElementById('location').value,
                    latitude: parseFloat(document.getElementById('latitude').value) || null,
                    longitude: parseFloat(document.getElementById('longitude').value) || null
                };
            }

            async downloadImages() {
                // In a real implementation, this would create a ZIP file with renamed images
                // For demo purposes, we'll simulate the download
                const statusText = document.querySelector('.status-text');
                statusText.textContent = 'Preparing download...';
                statusText.style.display = 'block';

                await this.delay(1000);

                // Create download manifest
                const manifest = this.processedFiles.map((file, index) => ({
                    originalName: file.original.name,
                    newName: file.newName,
                    size: file.original.size,
                    type: file.original.type,
                    location: file.location
                }));

                const blob = new Blob([JSON.stringify(manifest, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'rename-manifest.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                statusText.textContent = 'Download ready! (Demo: Downloaded rename manifest)';
                
                setTimeout(() => {
                    statusText.style.display = 'none';
                }, 3000);
            }

            clearAll() {
                this.files = [];
                this.processedFiles = [];
                document.getElementById('imagePreview').innerHTML = '';
                document.getElementById('processBtn').disabled = true;
                document.getElementById('downloadBtn').style.display = 'none';
                document.getElementById('resultsPanel').style.display = 'none';
                document.querySelector('.progress-bar').style.display = 'none';
                document.querySelector('.status-text').style.display = 'none';
                document.getElementById('fileInput').value = '';
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            new ImageRenamer();
        });
    </script>
</body>
</html>